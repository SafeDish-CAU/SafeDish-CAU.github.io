{
  "openapi": "3.0.0",
  "info": {
    "title": "API Docs",
    "version": "1.0.0",
    "description": "API 문서"
  },
  "servers": [
    {
      "url": "http://{url}:15557"
    }
  ],
  "paths": {
    "/api/owner": {
      "post": {
        "summary": "Create owner (sign up)",
        "operationId": "createOwner",
        "tags": [
          "Owner"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateOwnerRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Owner created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateOwnerResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Email already in use",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/api/auth/login": {
      "post": {
        "summary": "Login owner",
        "operationId": "loginOwner",
        "tags": [
          "Auth"
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/LoginOwnerRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Login success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LoginOwnerResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Email or password not found / mismatch",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/api/store": {
      "post": {
        "summary": "Create store",
        "operationId": "createStore",
        "tags": [
          "Store"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "description": "access token. Format: `{token}`",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateStoreRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Store created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateStoreResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized (invalid token)"
          },
          "404": {
            "description": "Invalid road address",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/api/store/{storeId}": {
      "get": {
        "summary": "Get store detail",
        "operationId": "readStore",
        "tags": [
          "Store"
        ],
        "parameters": [
          {
            "name": "storeId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Store detail",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReadStoreResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Store not found"
          }
        }
      }
    },
    "/api/store/{storeId}/edit": {
      "post": {
        "summary": "Edit store",
        "operationId": "editStore",
        "tags": [
          "Store"
        ],
        "parameters": [
          {
            "name": "storeId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "description": "access token. Format: `{token}`",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EditStoreRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Store updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EditStoreResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized (invalid token)"
          },
          "404": {
            "description": "Store not found"
          }
        }
      }
    },
    "/api/store/{storeId}/delete": {
      "post": {
        "summary": "Delete store",
        "operationId": "deleteStore",
        "tags": [
          "Store"
        ],
        "parameters": [
          {
            "name": "storeId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "description": "access token. Format: `{token}`",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Store deleted"
          },
          "401": {
            "description": "Unauthorized (invalid token)"
          },
          "404": {
            "description": "Store not found"
          }
        }
      }
    },
    "/api/store/{storeId}/address": {
      "post": {
        "summary": "Edit store address",
        "operationId": "editStoreAddress",
        "tags": [
          "Store"
        ],
        "parameters": [
          {
            "name": "storeId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "description": "access token. Format: `{token}`",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EditStoreAddressRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Store address updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EditStoreAddressResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized (invalid token)"
          },
          "404": {
            "description": "Invalid road address",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      }
    },
    "/api/menu": {
      "post": {
        "summary": "Create menu",
        "operationId": "createMenu",
        "tags": [
          "Menu"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "description": "access token. Format: `{token}`",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateMenuRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Menu created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateMenuResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized (invalid token)"
          }
        }
      }
    },
    "/api/menu/{menuId}": {
      "get": {
        "summary": "Get menu detail",
        "operationId": "readMenu",
        "tags": [
          "Menu"
        ],
        "parameters": [
          {
            "name": "menuId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Menu detail",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReadMenuResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Menu not found"
          }
        }
      }
    },
    "/api/menu/{menuId}/edit": {
      "post": {
        "summary": "Edit menu",
        "operationId": "editMenu",
        "tags": [
          "Menu"
        ],
        "parameters": [
          {
            "name": "menuId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "description": "access token. Format: `{token}`",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EditMenuRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Menu updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EditMenuResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized (invalid token)"
          },
          "404": {
            "description": "Menu not found"
          }
        }
      }
    },
    "/api/menu/{menuId}/delete": {
      "post": {
        "summary": "Delete menu",
        "operationId": "deleteMenu",
        "tags": [
          "Menu"
        ],
        "parameters": [
          {
            "name": "menuId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "description": "access token. Format: `{token}`",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Menu deleted"
          },
          "401": {
            "description": "Unauthorized (invalid token)"
          },
          "404": {
            "description": "Menu not found"
          }
        }
      }
    },
    "/api/option": {
      "post": {
        "summary": "Create option",
        "operationId": "createOption",
        "tags": [
          "Option"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "description": "access token. Format: `{token}`",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreateOptionRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Option created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreateOptionResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized (invalid token)"
          }
        }
      }
    },
    "/api/option/{optionId}": {
      "get": {
        "summary": "Get option detail",
        "operationId": "readOption",
        "tags": [
          "Option"
        ],
        "parameters": [
          {
            "name": "optionId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Option detail",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReadOptionResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Option not found"
          }
        }
      }
    },
    "/api/option/{optionId}/edit": {
      "post": {
        "summary": "Edit option",
        "operationId": "editOption",
        "tags": [
          "Option"
        ],
        "parameters": [
          {
            "name": "optionId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "description": "access token. Format: `{token}`",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/EditOptionRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Option updated",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/EditOptionResponseDto"
                }
              }
            }
          },
          "401": {
            "description": "Unauthorized (invalid token)"
          },
          "404": {
            "description": "Option not found"
          }
        }
      }
    },
    "/api/option/{optionId}/delete": {
      "post": {
        "summary": "Delete option",
        "operationId": "deleteOption",
        "tags": [
          "Option"
        ],
        "parameters": [
          {
            "name": "optionId",
            "in": "path",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "description": "access token. Format: `{token}`",
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Option deleted"
          },
          "401": {
            "description": "Unauthorized (invalid token)"
          },
          "404": {
            "description": "Option not found"
          }
        }
      }
    },
    "/api/platform": {
      "get": {
        "summary": "Find store by platform info",
        "operationId": "readPlatform",
        "tags": [
          "Platform"
        ],
        "parameters": [
          {
            "name": "pf_name",
            "in": "query",
            "required": true,
            "schema": {
              "type": "string"
            },
            "description": "Platform name (e.g. baemin, coupang)"
          },
          {
            "name": "pf_sid",
            "in": "query",
            "required": true,
            "schema": {
              "type": "integer",
              "format": "int64"
            },
            "description": "Platform store id"
          }
        ],
        "responses": {
          "200": {
            "description": "Found store id for given platform",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReadPlatformResponseDto"
                }
              }
            }
          },
          "404": {
            "description": "Store not found for given platform",
            "content": {
              "text/plain": {
                "schema": {
                  "type": "string"
                }
              }
            }
          }
        }
      },
      "post": {
        "summary": "Link store with external platform",
        "operationId": "createPlatform",
        "tags": [
          "Platform"
        ],
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "required": true,
            "description": "access token. Format: `{token}`",
            "schema": {
              "type": "string"
            }
          }
        ],
        "requestBody": {
          "required": true,
          "content": {
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/CreatePlatformRequestDto"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Platform link created",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreatePlatformResponseDto"
                }
              }
            }
          },
          "400": {
            "description": "Invalid platform name"
          },
          "401": {
            "description": "Unauthorized (invalid token)"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "AllergyDto": {
        "type": "object",
        "properties": {
          "allergy_code": {
            "type": "integer",
            "format": "int64"
          },
          "allergy_description": {
            "type": "string"
          }
        }
      },
      "CreateMenuRequestDto": {
        "type": "object",
        "properties": {
          "store_id": {
            "type": "integer",
            "format": "int64"
          },
          "menu_name": {
            "type": "string"
          },
          "menu_price": {
            "type": "integer",
            "format": "int64"
          },
          "menu_allergies": {
            "type": "array",
            "items": {
              "type": "integer",
              "format": "int64"
            }
          }
        }
      },
      "CreateMenuResponseDto": {
        "type": "object",
        "properties": {
          "store_id": {
            "type": "integer",
            "format": "int64"
          },
          "menu_id": {
            "type": "integer",
            "format": "int64"
          },
          "menu_name": {
            "type": "string"
          },
          "menu_price": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "CreateOptionRequestDto": {
        "type": "object",
        "properties": {
          "menu_id": {
            "type": "integer",
            "format": "int64"
          },
          "option_name": {
            "type": "string"
          },
          "option_price": {
            "type": "integer",
            "format": "int64"
          },
          "option_allergies": {
            "type": "array",
            "items": {
              "type": "integer",
              "format": "int64"
            }
          }
        }
      },
      "CreateOptionResponseDto": {
        "type": "object",
        "properties": {
          "menu_id": {
            "type": "integer",
            "format": "int64"
          },
          "option_id": {
            "type": "integer",
            "format": "int64"
          },
          "option_name": {
            "type": "string"
          },
          "option_price": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "CreateOwnerRequestDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string"
          },
          "password": {
            "type": "string"
          }
        }
      },
      "CreateOwnerResponseDto": {
        "type": "object",
        "properties": {
          "owner_id": {
            "type": "integer",
            "format": "int64"
          },
          "token": {
            "type": "string"
          }
        }
      },
      "CreatePlatformRequestDto": {
        "type": "object",
        "properties": {
          "store_id": {
            "type": "integer",
            "format": "int64"
          },
          "pf_name": {
            "type": "string"
          },
          "pf_sid": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "CreatePlatformResponseDto": {
        "type": "object",
        "properties": {
          "store_id": {
            "type": "integer",
            "format": "int64"
          },
          "pf_name": {
            "type": "string"
          },
          "pf_sid": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "CreateStoreRequestDto": {
        "type": "object",
        "properties": {
          "store_name": {
            "type": "string"
          },
          "store_road_address": {
            "type": "string"
          },
          "store_postal_code": {
            "type": "string"
          },
          "store_detail_address": {
            "type": "string"
          }
        }
      },
      "CreateStoreResponseDto": {
        "type": "object",
        "properties": {
          "store_id": {
            "type": "integer",
            "format": "int64"
          },
          "store_name": {
            "type": "string"
          }
        }
      },
      "LoginOwnerRequestDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string"
          },
          "password": {
            "type": "string"
          }
        }
      },
      "LoginOwnerResponseDto": {
        "type": "object",
        "properties": {
          "owner_id": {
            "type": "integer",
            "format": "int64"
          },
          "token": {
            "type": "string"
          }
        }
      },
      "MenuDto": {
        "type": "object",
        "properties": {
          "menu_id": {
            "type": "integer",
            "format": "int64"
          },
          "menu_name": {
            "type": "string"
          },
          "menu_price": {
            "type": "integer",
            "format": "int64"
          },
          "menu_allergies": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AllergyDto"
            }
          },
          "menu_options": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/OptionDto"
            }
          }
        }
      },
      "OptionDto": {
        "type": "object",
        "properties": {
          "option_id": {
            "type": "integer",
            "format": "int64"
          },
          "option_name": {
            "type": "string"
          },
          "option_price": {
            "type": "integer",
            "format": "int64"
          },
          "option_allergies": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/AllergyDto"
            }
          }
        }
      },
      "OwnerRequestDto": {
        "type": "object",
        "properties": {
          "email": {
            "type": "string"
          },
          "password": {
            "type": "string"
          }
        }
      },
      "ReadPlatformResponseDto": {
        "type": "object",
        "properties": {
          "store_id": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "StoreDto": {
        "type": "object",
        "properties": {
          "store_id": {
            "type": "integer",
            "format": "int64"
          },
          "store_name": {
            "type": "string"
          },
          "menus": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/MenuDto"
            }
          }
        }
      },
      "ReadStoreResponseDto": {
        "allOf": [
          {
            "$ref": "#/components/schemas/StoreDto"
          }
        ]
      },
      "ReadMenuResponseDto": {
        "allOf": [
          {
            "$ref": "#/components/schemas/MenuDto"
          }
        ]
      },
      "ReadOptionResponseDto": {
        "allOf": [
          {
            "$ref": "#/components/schemas/OptionDto"
          }
        ]
      },
      "EditStoreRequestDto": {
        "type": "object",
        "properties": {
          "store_name": {
            "type": "string"
          }
        }
      },
      "EditStoreResponseDto": {
        "type": "object",
        "properties": {
          "store_id": {
            "type": "integer",
            "format": "int64"
          },
          "store_name": {
            "type": "string"
          }
        }
      },
      "EditMenuRequestDto": {
        "type": "object",
        "properties": {
          "menu_name": {
            "type": "string"
          },
          "menu_price": {
            "type": "integer",
            "format": "int64"
          },
          "menu_allergies": {
            "type": "array",
            "items": {
              "type": "integer",
              "format": "int64"
            }
          }
        }
      },
      "EditMenuResponseDto": {
        "type": "object",
        "properties": {
          "menu_id": {
            "type": "integer",
            "format": "int64"
          },
          "menu_name": {
            "type": "string"
          },
          "menu_price": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "EditOptionRequestDto": {
        "type": "object",
        "properties": {
          "option_name": {
            "type": "string"
          },
          "option_price": {
            "type": "integer",
            "format": "int64"
          },
          "option_allergies": {
            "type": "array",
            "items": {
              "type": "integer",
              "format": "int64"
            }
          }
        }
      },
      "EditOptionResponseDto": {
        "type": "object",
        "properties": {
          "option_id": {
            "type": "integer",
            "format": "int64"
          },
          "option_name": {
            "type": "string"
          },
          "option_price": {
            "type": "integer",
            "format": "int64"
          }
        }
      },
      "EditStoreAddressRequestDto": {
        "type": "object",
        "properties": {
          "store_road_address": {
            "type": "string"
          },
          "store_postal_code": {
            "type": "string"
          },
          "store_detail_address": {
            "type": "string"
          }
        }
      },
      "EditStoreAddressResponseDto": {
        "type": "object",
        "properties": {
          "store_id": {
            "type": "integer",
            "format": "int64"
          },
          "store_road_address": {
            "type": "string"
          },
          "store_postal_code": {
            "type": "string"
          },
          "store_detail_address": {
            "type": "string"
          }
        }
      }
    }
  }
}
